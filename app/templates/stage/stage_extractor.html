<!DOCTYPE html>
{% extends 'stage/base.html' %}
{% load i18n utils %}
{% block content %}
    {% load static %}
    {% trans "Zuhörer gesamt:" as sum_listeners %}
    <div id="sumListeners"><span class="display1">{{ sum_listeners }}&nbsp;</span><span class="display1"
                                                                                        id="sumListenersNumber"></span>
    </div>
    <div id="listeners"></div>
    {% trans "Verbindung zu Extraktor-Dienst wird aufgebaut..." as connect %}
    <div class="pos-fixed pos-center" id="activity">
        <span class="pos-fixed pos-center" style="margin-top: -74px" data-role="activity" data-type="ring"></span>
        <div>{{ connect }}</div>
    </div>
    {% trans "Extraktor-Dienst läuft nicht oder ist nicht erreichbar." as error_message %}
    <div class="pos-fixed pos-center" id="errorMessage" style="display:none">
        <span class="mif-cancel mif-5x fg-red pos-fixed pos-center" style="margin-top: -74px"></span>
        <div>{{ error_message }}</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reconnecting-websocket/1.0.0/reconnecting-websocket.js"></script>
    <script src="{% static 'stage/js/stage_ws.js' %}"></script>
    <script>
        stage_ws('{{ credential.congregation|escape }}', {{ credential.show_only_request_to_speak|yesno:"true,false" }});
    </script>
{% endblock %}